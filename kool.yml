scripts:
  verify-client: openssl verify -verbose -CAfile ./client/ca.crt ./client/client.crt
  verify-server: openssl verify -verbose -CAfile ./client_certs/ca.crt ./client/client.crt
  secure: curl --verbose --insecure --cert ./client/client.crt --key ./client/client.key https://localhost/secure
  mtls-client:
    - bash -c "cat ./client/mtls-client.json | jq -r .ca | base64 --decode | openssl x509 -inform DER -outform PEM -out ./client/ca.crt -in -"
    - bash -c "cat ./client/mtls-client.json | jq -r .cert | base64 --decode | openssl x509 -inform DER -outform PEM -out ./client/client.crt -in -"
    - bash -c "cat ./client/mtls-client.json | jq -r .key | base64 --decode | openssl rsa -inform DER -outform PEM -out ./client/client.key -in -"
  mtls-server:
    - bash -c "cat ./client/mtls-server.json | jq -r .ca | base64 --decode | openssl x509 -inform DER -outform PEM -out ./client/ca.crt -in -"
    - bash -c "cat ./client/mtls-server.json | jq -r .cert | base64 --decode | openssl x509 -inform DER -outform PEM -out ./client/client.crt -in -"
    - bash -c "cat ./client/mtls-server.json | jq -r .key | base64 --decode | openssl rsa -inform DER -outform PEM -out ./client/client.key -in -"